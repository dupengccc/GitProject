@{
    Layout = "~/Views/Shared/_PageList.cshtml";
}
@using Common;
@model dynamic
  <div class="ibox float-e-margins">
             <div class="ibox-title">
                 <h5>模块管理</h5>
                 <div class="ibox-tools">
                        <a class="btn btn-primary btn-xl"  id="insert" action="add"><i class="fa fa-plus-circle fa-fw" style="width:80px;">创建新分类</i></a>
                        <a class="btn btn-warning btn-xl" id="edit" action="add"><i class="fa fa-pencil fa-fw" style="width:60px;">编辑</i></a>
                        <a class="btn btn-danger btn-xl" id="remove" action="add"><i class="fa fa-trash-o fa-fw" style="width:60px;">编辑</i></a>
                        <a class="reload-link" style="color:#c4c4c4" href="javascript:window.reload()" data-toggle="tooltip" data-placement="left" title="刷新" >
                             <i class="fa fa-repeat fa-lg"></i>
                        </a>
                 </div>
             </div>
             <div class="ibox-content">
                   @using (Ajax.BeginForm("Index", null, new AjaxOptions(), new { @id = "from1", @class = "from-horizontal", @method = "get" }))
                   {
                       <div class="row">
                           <div class="col-sm-9">
                                 <label>选择系统:</label>
                                  <select name="system" class="from-control input-sm inline" onchange="submit()">
                                        <option value="" @(ViewData["System"] == null || ViewData["System"].ToString() == "" ? "selected=\"selected\"" : "")>全部系统</option>
                                         @{
                                             foreach (var item in ViewData["Systemlist"] as dynamic)
                                             {
                                               <option value="@item.ID"  @(ViewData["System"] != null && ViewData["System"].ToString() != "" && ViewData["System"].ToString() == @item.ID ? "selected=\"selected\"" : "")>@item.NAME</option>
                                             }
                                         }
                                  </select>
                           </div>
                           <div class="col-sm-3">
                                 <div class="input-group">
                                       @Html.TextBox("Search", null, new { @class = "input-sm from-control", @style = "width:350px", @placeholder = "请输入查询关键字" })
                                       <span class="input-group-btn">
                                         <input type="submit" onclick="sumbit()" class="btn btn-sm btn-primary" value="搜索"/>
                                       </span>
                                 </div>
                           </div>
                       </div>
                                             }
             </div>
       </div>
       <div class="row">
           <table id="dataTables-example" class="table table-striped table-bordered table-hover dataTables-example">
            <thead>
                <tr>
                    <th>
                       <input type="checkbox" class="i-checks" id="checkall" name="checkall" /> 选择
                    </th>
                    <th>
                          所属系统
                    </th>
                    <th>
                          模块名称
                    </th>
                    <th>
                        模块别名
                    </th>
                    <th>
                        模块类型
                    </th>
                    <th>
                        模块地址
                    </th>
                    <th>
                        状态/顺序
                    </th>
                    <th>
                        操作 
                    </th>
                </tr>
            </thead>
            <tbody>
                @{foreach (var item in Model)
                 {
                       <tr>
                        <td class="tn"><input type="checkbox" name="check1" class="icheck_box" value="@item.ID" /></td>
                        <td class="gradeA">@item.SYSNAME</td>
                         <td  class="gradeA">@item.ALIAS</td>
                        <td style="text-align:left"><a href="#" listaction="detail" data-toggle="tooltip" data-placement="right" title="修改"> <i class="@item.ICON"></i> @Html.Raw(@item.modulename)</a></td>
                        <td class="gradeA">@item.ModuleType</td>
                        <td class="gradeA">@item.MODULEPATH</td>
                        <td class="gradeA">@item.ISSHOW/@item.SHOWORDER</td>
                        <td style="text-align:center">
                            <a href="javascript:AddChild('@item.ID','@item.FK_BELONGSYSTEM')" listaction="addchild" class="text-navy" title="添加子模块">[添加子模块]</a>
                        </td>
                        </tr>
                     }
                  }
            </tbody>
       </table>
   </div>
     @section PageSpecificStyleSheetIncludes{
         <script src="~/Content/js/admin/moduleManage.js" type="text/javascript"></script>
         }
     @* <script type="text/javascript">
       //$(function () {
       //    $('#table-javascript').bootstrapTable({
       //            method: 'get',
       //            url: '/Home/GetData',
       //            cache: false,
       //            height: 400,
       //            striped: true,
       //            pagination: true,
       //            pageSize: 50,
       //            pageList: [10, 25, 50, 100, 200],
       //            search: true,
       //            showColumns: true,
       //            showRefresh: true,
       //            minimumCountColumns: 2,
       //            clickToSelect: true,
       //            columns: [{
       //                field: 'state',
       //                checkbox: true
       //            }, {
       //                field: 'ID',
       //                title: 'Item ID',
       //                align: 'right',
       //                valign: 'bottom',
       //                sortable: true
       //            }, {
       //                field: 'Name',
       //                title: 'Item Name',
       //                align: 'center',
       //                valign: 'middle',
       //                sortable: true
       //            }, {
       //                field: 'Price',
       //                title: 'Item Price',
       //                align: 'left',
       //                valign: 'top',
       //                sortable: true
       //            }, {
       //                field: 'operate',
       //                title: 'Item Operate',
       //                align: 'center',
       //                valign: 'middle',
       //                clickToSelect: false,
       //                formatter: operateFormatter,
       //                events: operateEvents
       //            }]
       //        });

       //});

       //function operateFormatter(value, row, index) {
       //    return [
       //        '<a class="like" href="javascript:void(0)" title="Like">',
       //            '<i class="glyphicon glyphicon-heart"></i>',
       //        '</a>',
       //        ' <a class="edit ml10" href="javascript:void(0)" title="Edit">',
       //            '<i class="glyphicon glyphicon-edit"></i>',
       //        '</a>',
       //        ' <a class="remove ml10" href="javascript:void(0)" title="Remove">',
       //            '<i class="glyphicon glyphicon-remove"></i>',
       //        '</a>'
       //    ].join('');
       //}

       //window.operateEvents = {
       //    'click .like': function (e, value, row, index) {
       //        alert('You click like icon, row: ' + JSON.stringify(row));
       //        console.log(value, row, index);
       //    },
       //    'click .edit': function (e, value, row, index) {
       //        alert('You click edit icon, row: ' + JSON.stringify(row));
       //        console.log(value, row, index);
       //    },
       //    'click .remove': function (e, value, row, index) {
       //        alert('You click remove icon, row: ' + JSON.stringify(row));
       //        console.log(value, row, index);
       //    }
       //};

    </script>*@

